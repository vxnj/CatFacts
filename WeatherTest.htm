<!DOCTYPE html>
<html>
<head>

<link rel="stylesheet" href="style.css" />
<script src="funcs.js"></script>

<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.2/dist/css/bootstrap.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.2/dist/js/bootstrap.bundle.min.js"></script>


<script>
// Store XMLHttpRequest and the JSON file location in variables
var xhr = new XMLHttpRequest();
var url = "https://api.openweathermap.org/data/2.5/onecall?lat=40.8&lon=-73.97&units=imperial&exclude=minutely&appid=3eaa5145be3fbca4b9a3f346b0f8a668";

// Called whenever the readyState attribute changes 
xhr.onreadystatechange = function() { // Check if fetch request is done
  if (xhr.readyState == 4 && xhr.status == 200) { 
    var jsonData = JSON.parse(xhr.responseText);
    newFact(jsonData);
  }
};

// Do the HTTP call using the url variable we specified above
function wea() {
  xhr.open("GET", url, true);
  xhr.send();
}

// Function that formats the string with HTML tags, then outputs the result
function newFact(data) {
    //var output = data.hourly[0].temp
    
    let txt = "";
    for (let i = 0; i < 10; i++) {
      
      var xd = new Date(data.hourly[i].dt*1000);
      xd2 = xd.toLocaleString('en-US', { hour: 'numeric', hour12: true })
      
      txt +=   "0" + xd.toLocaleString('en-US', { hour: 'numeric', hour12: true }) + " | "
                   + parseInt(.5 + data.hourly[i].temp) + "⁰ | "
                   + data.hourly[i].humidity + "% | " 
                   + data.hourly[i].weather[0].main + "<br>";
                   //console.log (xd2)

      tblhr += "<tr>" 
            + "  <th>" + xd.toLocaleString('en-US', { hour: 'numeric', hour12: true }) + "</th>"
            + "  <th>" + parseInt(.5 + data.hourly[i].temp) + "</th>"
            + "  <th>Email</th>"
            + "</tr>"
   }
 
   

   document.getElementById("demo").innerHTML = "Current Temp: " + data.current.temp;
   document.getElementById("wh").innerHTML = txt;
  
 }

window.onload = wea;

</script>


<title>weather</title>
</head>
<body>

<button type="button" class="btn btn-success" onclick="wea()" >Refresh</button> 
<br><br>



<br><br>
<div id="demo"></div>
<div id="wh"></div>

<div id="tblhr"></div>

<table class="table table-striped">
  <thead>
    <tr>
      <th>Firstname</th>
      <th>Lastname</th>
      <th>Email</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>John</td>
      <td>Doe</td>
      <td>john@example.com</td>
    </tr>
    <tr>
      <td>Mary</td>
      <td>Moe</td>
      <td>mary@example.com</td>
    </tr>
    <tr>
      <td>July</td>
      <td>Dooley</td>
      <td>july@example.com</td>
    </tr>
  </tbody>
</table>



<a href="https://api.openweathermap.org/data/2.5/onecall?lat=40.7992&lon=-73.972&exclude=minutely&appid=3eaa5145be3fbca4b9a3f346b0f8a668"
target="blank">open weather map<a/>

 

</body>
</html>